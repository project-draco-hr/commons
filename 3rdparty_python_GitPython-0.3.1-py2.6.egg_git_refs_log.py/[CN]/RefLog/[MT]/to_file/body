def to_file(self, filepath):
    'Write the contents of the reflog instance to a file at the given filepath.\n\t\t:param filepath: path to file, parent directories are assumed to exist'
    lfd = LockedFD(filepath)
    assure_directory_exists(filepath, is_file=True)
    fp = lfd.open(write=True, stream=True)
    try:
        self._serialize(fp)
        lfd.commit()
    except:
        lfd.rollback()
        raise
