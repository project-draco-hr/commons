def assert_classfile_jar_contents(self, context, empty=False):
    with self.add_products(context, 'classes', self.jl, 'a.class', 'b.class'):
        with self.add_products(context, 'classes', self.sl, 'c.class'):
            with self.add_products(context, 'resources', self.res, 'r.txt.transformed'):
                JarCreate(context).execute(context.targets())
                if empty:
                    self.assertTrue(context.products.get('jars').empty())
                else:
                    self.assert_jar_contents(context, 'jars', self.jl, 'a.class', 'b.class', 'r.txt.transformed')
                    self.assert_jar_contents(context, 'jars', self.sl, 'c.class')
