import os
import tempfile
from collections import defaultdict
from contextlib import contextmanager, closing
from textwrap import dedent
from twitter.common.contextutil import temporary_dir
from twitter.common.dirutil import safe_open, safe_rmtree
from twitter.pants.base.context_utils import create_context
from twitter.pants.base_build_root_test import BaseBuildRootTest
from twitter.pants.goal.products import MultipleRootedProducts
from twitter.pants.java.jar import open_jar
from twitter.pants.targets.sources import SourceRoot
from twitter.pants.targets import JavaLibrary, JavaThriftLibrary, Resources, ScalaLibrary
from twitter.pants.tasks.jar_create import is_jvm_library, JarCreate
