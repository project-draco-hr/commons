def test_download_fd(self):
    with temporary_file() as fd:
        (downloaded, path) = self.expect_download(path_or_fd=fd)
        self.assertEqual(path, fd.name)
        fd.close()
        with open(path) as fp:
            self.assertEqual(downloaded, fp.read())
