from contextlib import contextmanager
import os
import unittest
from twitter.common.collections import OrderedSet
from twitter.common.contextutil import temporary_file, temporary_dir
from twitter.common.dirutil import safe_mkdir, touch
from twitter.common.dirutil.chroot import Chroot
from twitter.common.collections import OrderedSet
from twitter.pants.base import ParseContext, Target, TargetDefinitionException
from twitter.pants.commands.setup_py import SetupPy
from twitter.pants.targets import Pants as pants, PythonArtifact as setup_py, PythonBinary as python_binary, PythonLibrary as python_library
from mock import MagicMock, Mock, call
import pytest
