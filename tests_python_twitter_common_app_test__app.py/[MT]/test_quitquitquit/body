def test_quitquitquit():

    def long_lived_main():
        time.sleep(10000)
    app = TestApplication(long_lived_main)

    def wait_and_stop_app():
        time.sleep(0.5)
        app.quitquitquit()
    stop_thread = threading.Thread(target=wait_and_stop_app)
    stop_thread.start()
    app.main()
    assert (app.exited_rc == None)
