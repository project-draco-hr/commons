def test_multiple_imports_error():
    io = ImportOrder(PythonFile(stitch_chunks(0, ImportType.STDLIB, ImportType.TWITTER)))
    import_chunks = list(io.iter_import_chunks())
    assert (len(import_chunks) == 1)
    (module_types, chunk_errors) = io.classify_imports(import_chunks[0])
    assert (len(chunk_errors) == 1)
    assert (chunk_errors[0].code == 'T405')
    assert (chunk_errors[0].severity == Nit.ERROR)
    assert (set(module_types) == set([ImportType.STDLIB, ImportType.TWITTER]))
    io = ImportOrder(PythonFile('import time, pkg_resources'))
    import_chunks = list(io.iter_import_chunks())
    assert (len(import_chunks) == 1)
    (module_types, chunk_errors) = io.classify_imports(import_chunks[0])
    assert (len(chunk_errors) == 3)
    assert (set((chunk_error.code for chunk_error in chunk_errors)) == set(['T403', 'T405', 'T402']))
    assert (set(module_types) == set([ImportType.STDLIB, ImportType.THIRD_PARTY]))
