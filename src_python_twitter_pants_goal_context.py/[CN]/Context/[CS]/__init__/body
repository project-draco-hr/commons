def __init__(self, config, options, target_roots, lock=None, log=None):
    self._config = config
    self._options = options
    self._lock = (lock or Lock.unlocked())
    self._log = (log or Context.Log())
    self._state = {}
    self._products = Products()
    self.replace_targets(target_roots)
