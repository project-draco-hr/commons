def add_new_target(self, target_base, target_type, *args, **kwargs):
    'Creates a new target, adds it to the context and returns it.\n\n    This method ensures the target resolves files against the given target_base, creating the\n    directory if needed and registering a source root.\n    '
    if ('derived_from' in kwargs):
        derived_from = kwargs.get('derived_from')
        del kwargs['derived_from']
    else:
        derived_from = None
    target = self._create_new_target(target_base, target_type, *args, **kwargs)
    self.add_target(target)
    if derived_from:
        target.derived_from = derived_from
    return target
