def _render_message(self, *msg_elements):
    elements = []
    detail_ids = []
    for element in msg_elements:
        if isinstance(element, basestring):
            element = [element]
        defaults = ('', None, None, False)
        (text, detail, detail_id, detail_initially_visible) = map((lambda x, y: (x or y)), element, defaults)
        element_args = {'text': self._htmlify_text(text), }
        if (detail is not None):
            detail_id = (detail_id or uuid.uuid4())
            detail_ids.append(detail_id)
            element_args.update({'detail': self._htmlify_text(detail), 'detail_initially_visible': detail_initially_visible, 'detail-id': detail_id, })
        elements.append(element_args)
    args = {'elements': elements, 'all-detail-ids': detail_ids, }
    return self._renderer.render_name('message', args)
