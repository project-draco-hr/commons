def _mapjars(self, genmap, target):
    mapdir = os.path.join(self._classpath_dir, target.id)
    safe_mkdir(mapdir, clean=True)
    self._exec_ivy(mapdir, [target], ['-retrieve', ('%s/[organisation]/[artifact]/[organisation]-[artifact]-[revision].jar' % mapdir), '-symlink', '-types', 'jar', 'bundle'])
    for org in os.listdir(mapdir):
        orgdir = os.path.join(mapdir, org)
        if os.path.isdir(orgdir):
            for name in os.listdir(orgdir):
                artifactdir = os.path.join(orgdir, name)
                if os.path.isdir(artifactdir):
                    for file in os.listdir(artifactdir):
                        if file.endswith('.jar'):
                            genmap.add(org, artifactdir).append(file)
                            genmap.add((org, name), artifactdir).append(file)
                            genmap.add(target, artifactdir).append(file)
