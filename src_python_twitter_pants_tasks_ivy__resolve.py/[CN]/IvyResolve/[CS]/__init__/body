def __init__(self, context):
    classpath = context.config.getlist('ivy', 'classpath')
    nailgun_dir = context.config.get('ivy-resolve', 'nailgun_dir')
    NailgunTask.__init__(self, context, classpath=classpath, workdir=nailgun_dir)
    self._ivy_settings = context.config.get('ivy', 'ivy_settings')
    self._cachedir = context.config.get('ivy-resolve', 'cache_dir')
    self._confs = context.config.getlist('ivy-resolve', 'confs')
    self._transitive = context.config.getbool('ivy-resolve', 'transitive')
    self._args = context.config.getlist('ivy-resolve', 'args')
    self._profile = context.config.get('ivy-resolve', 'profile')
    self._template_path = os.path.join('ivy_resolve', 'ivy.mk')
    self._work_dir = context.config.get('ivy-resolve', 'workdir')
    self._classpath_file = os.path.join(self._work_dir, 'classpath')
    self._classpath_dir = os.path.join(self._work_dir, 'mapped')
    self._outdir = (context.options.ivy_resolve_outdir or os.path.join(self._work_dir, 'reports'))
    self._open = context.options.ivy_resolve_open
    self._report = (self._open or context.options.ivy_resolve_report)

    def parse_override(override):
        match = re.match('^([^#]+)#([^=]+)=([^\\s]+)$', override)
        if (not match):
            raise TaskError(('Invalid dependency override: %s' % override))
        (org, name, rev_or_url) = match.groups()

        def fmt_message(message, template):
            return (message % dict(overridden=('%s#%s;%s' % (template.org, template.module, template.version)), rev=rev_or_url, url=rev_or_url))

        def replace_rev(template):
            context.log.info(fmt_message('Overrode %(overridden)s with rev %(rev)s', template))
            return template.extend(version=rev_or_url, url=None, force=True)

        def replace_url(template):
            context.log.info(fmt_message('Overrode %(overridden)s with snapshot at %(url)s', template))
            return template.extend(version='SNAPSHOT', url=rev_or_url, force=True)
        replace = (replace_url if re.match('^\\w+://.+', rev_or_url) else replace_rev)
        return ((org, name), replace)
    self._overrides = {}
    if context.options.ivy_resolve_overrides:
        self._overrides.update((parse_override(o) for o in context.options.ivy_resolve_overrides))
