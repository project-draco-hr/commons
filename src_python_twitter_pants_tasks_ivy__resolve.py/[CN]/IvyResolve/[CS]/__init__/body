def __init__(self, context, confs=None):
    classpath = context.config.getlist('ivy', 'classpath')
    nailgun_dir = context.config.get('ivy-resolve', 'nailgun_dir')
    NailgunTask.__init__(self, context, classpath=classpath, workdir=nailgun_dir)
    self._ivy_settings = context.config.get('ivy', 'ivy_settings')
    self._cachedir = (context.options.ivy_resolve_cache or context.config.get('ivy', 'cache_dir'))
    self._confs = (confs or context.config.getlist('ivy-resolve', 'confs'))
    self._transitive = context.config.getbool('ivy-resolve', 'transitive')
    self._opts = context.config.getlist('ivy-resolve', 'args')
    self._ivy_args = context.options.ivy_args
    self._mutable_pattern = (context.options.ivy_mutable_pattern or context.config.get('ivy-resolve', 'mutable_pattern', default=None))
    if self._mutable_pattern:
        try:
            self._mutable_pattern = re.compile(self._mutable_pattern)
        except re.error as e:
            raise TaskError(('Invalid mutable pattern specified: %s %s' % (self._mutable_pattern, e)))
    self._profile = context.config.get('ivy-resolve', 'profile')
    self._template_path = os.path.join('templates', 'ivy_resolve', 'ivy.mustache')
    self._work_dir = context.config.get('ivy-resolve', 'workdir')
    self._classpath_dir = os.path.join(self._work_dir, 'mapped')
    self._outdir = (context.options.ivy_resolve_outdir or os.path.join(self._work_dir, 'reports'))
    self._open = context.options.ivy_resolve_open
    self._report = (self._open or context.options.ivy_resolve_report)
    self._ivy_utils = IvyUtils(context, self._cachedir)
    context.products.require_data('exclusives_groups')
    artifact_cache_spec = context.config.getlist('ivy-resolve', 'artifact_caches2', default=[])
    self.setup_artifact_cache(artifact_cache_spec)

    def parse_override(override):
        match = re.match('^([^#]+)#([^=]+)=([^\\s]+)$', override)
        if (not match):
            raise TaskError(('Invalid dependency override: %s' % override))
        (org, name, rev_or_url) = match.groups()

        def fmt_message(message, template):
            return (message % dict(overridden=('%s#%s;%s' % (template.org, template.module, template.version)), rev=rev_or_url, url=rev_or_url))

        def replace_rev(template):
            context.log.info(fmt_message('Overrode %(overridden)s with rev %(rev)s', template))
            return template.extend(version=rev_or_url, url=None, force=True)

        def replace_url(template):
            context.log.info(fmt_message('Overrode %(overridden)s with snapshot at %(url)s', template))
            return template.extend(version='SNAPSHOT', url=rev_or_url, force=True)
        replace = (replace_url if re.match('^\\w+://.+', rev_or_url) else replace_rev)
        return ((org, name), replace)
    self._overrides = {}
    if context.options.ivy_resolve_overrides:
        self._overrides.update((parse_override(o) for o in context.options.ivy_resolve_overrides))
