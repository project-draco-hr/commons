{
  File dir=newFolder("life/of/brian");
  FileUtils.write(new File(dir,"is"),"42");
  FileUtils.write(new File(dir,"used/to/be"),"1/137");
  File destinationJar=jarBuilder().addDirectory(dir,Optional.<String>absent()).addDirectory(dir,Optional.of("meaning/of/life")).write();
  doWithJar(destinationJar,new ExceptionalClosure<JarFile,IOException>(){
    @Override public void execute(    JarFile jar) throws IOException {
      assertListingUnordered(jar,"is","used/","used/to/","used/to/be","meaning/","meaning/of/","meaning/of/life/","meaning/of/life/is","meaning/of/life/used/","meaning/of/life/used/to/","meaning/of/life/used/to/be");
      assertStoredContents(jar,"is","42");
      assertStoredContents(jar,"used/to/be","1/137");
      assertStoredContents(jar,"meaning/of/life/is","42");
      assertStoredContents(jar,"meaning/of/life/used/to/be","1/137");
    }
  }
);
}
