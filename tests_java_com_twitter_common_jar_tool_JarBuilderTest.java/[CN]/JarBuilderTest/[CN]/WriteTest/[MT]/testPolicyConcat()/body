{
  DuplicateHandler alwaysConcat=DuplicateHandler.always(DuplicateAction.CONCAT);
  File destinationJar=jarBuilder().add(content("1/137\n"),"meaning/of/life").write();
  jarBuilder(destinationJar).add(content("42\n"),"meaning/of/life").add(content("jake\n"),"meaning/of/life").write(true,alwaysConcat);
  File jar=jarBuilder().add(content("more\n"),"meaning/of/life").write();
  File dir=newFolder("life/of");
  FileUtils.write(new File(dir,"life"),"jane");
  jarBuilder(destinationJar).addJar(jar).addDirectory(dir,Optional.of("meaning/of")).write(true,alwaysConcat);
  doWithJar(destinationJar,new ExceptionalClosure<JarFile,IOException>(){
    @Override public void execute(    JarFile jar) throws IOException {
      assertListing(jar,"meaning/","meaning/of/","meaning/of/life");
      assertCompressedContents(jar,"meaning/of/life","1/137\n42\njake\nmore\njane");
    }
  }
);
}
