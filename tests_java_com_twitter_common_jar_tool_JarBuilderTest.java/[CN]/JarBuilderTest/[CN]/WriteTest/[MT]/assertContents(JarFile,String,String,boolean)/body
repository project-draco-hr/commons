{
  Closer closer=Closer.create();
  JarEntry jarEntry=jar.getJarEntry(path);
  int method=jarEntry.getMethod();
  if (!compressed) {
    assertEquals(JarEntry.STORED,method);
  }
 else {
    assertTrue(method == JarEntry.STORED || method == JarEntry.DEFLATED);
  }
  InputStream entryIn=closer.register(jar.getInputStream(jarEntry));
  try {
    assertEquals(expectedContent,new String(ByteStreams.toByteArray(entryIn),Charsets.UTF_8));
  }
 catch (  IOException e) {
    throw closer.rethrow(e);
  }
 finally {
    closer.close();
  }
}
