def test_needs_modified_importer():
    with mock.patch('twitter.common.python.pex_bootstrapper.is_compressed', side_effect=(lambda entry_point: (entry_point == 'pex_file'))):
        with mock.patch('twitter.common.python.pex_bootstrapper.get_pex_info') as get_pex_info:
            get_pex_info.side_effect = (lambda entry_point: AlwaysWriteCache)
            assert (pb.needs_modified_importer('pex_file') is False)
            assert (pb.needs_modified_importer('dir') is False)
            get_pex_info.side_effect = (lambda entry_point: NeverWriteCache)
            assert (pb.needs_modified_importer('pex_file') is True)
            assert (pb.needs_modified_importer('dir') is False)
