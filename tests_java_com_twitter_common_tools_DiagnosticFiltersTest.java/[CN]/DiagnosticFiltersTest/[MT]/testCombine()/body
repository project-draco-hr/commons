{
  Diagnostic<FileObject> a=expectDiagnostic(Kind.WARNING,new URI("file:///a"),null);
  Diagnostic<FileObject> b=expectDiagnostic(Kind.ERROR,new URI("file:///b"),"fred*");
  Diagnostic<FileObject> c=expectDiagnostic(Kind.WARNING,new URI("file:///c"),"*fred");
  control.replay();
  DiagnosticFilter<FileObject> filter=DiagnosticFilters.combine(ImmutableList.of(DiagnosticFilters.ignorePathPrefixes(ImmutableList.of("/a")),DiagnosticFilters.ignoreMessagesMatching(ImmutableList.of(Pattern.compile("^fred.*")))));
  assertEquals(Treatment.IGNORE,filter.categorize(a));
  assertEquals(Treatment.IGNORE,filter.categorize(b));
  assertEquals(Treatment.WARNING,filter.categorize(c));
}
