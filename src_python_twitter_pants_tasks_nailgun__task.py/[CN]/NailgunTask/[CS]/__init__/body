def __init__(self, context, workdir=None):
    Task.__init__(self, context)
    self._nailgun_bootstrap_key = 'nailgun'
    nailgun_bootstrap_tools = context.config.getlist('nailgun', 'bootstrap-tools', default=[':nailgun-server'])
    self._jvm_tool_bootstrapper.register_jvm_tool(self._nailgun_bootstrap_key, nailgun_bootstrap_tools)
    self._ng_server_args = context.config.getlist('nailgun', 'args')
    self._daemon = context.options.nailgun_daemon
    workdir = (workdir or context.config.get('nailgun', 'workdir'))
    self._identifier_arg = ('-Dpants.ng.identifier=%s' % os.path.relpath(workdir, get_buildroot()))
    self._current_pidport = None
    self._ng_out = os.path.join(workdir, 'stdout')
    self._ng_err = os.path.join(workdir, 'stderr')
    self._spawn_lock = threading.Lock()
