def add_dependency(self, dependency):
    added_files = set()
    if (not isinstance(dependency, PythonDependency)):
        raise PythonEnvironment.InvalidDependency(('Input dependency (%s) is not a valid PythonDependency!' % repr(dependency)))
    for handle in dependency.files():
        target = os.path.join(PythonEnvironment.DEPENDENCY_DIR, handle.parent(), handle.dest())
        if handle.source():
            self._chroot.link(handle.source(), target, 'dependency')
        else:
            self._chroot.write(handle.content(), target, 'dependency')
        added_files.add(os.path.join(self.path(), target))
    return (os.path.join(self.path(), PythonEnvironment.DEPENDENCY_DIR), added_files)
