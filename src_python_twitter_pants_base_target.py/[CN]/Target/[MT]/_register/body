def _register(self):
    existing = self._targets_by_address.get(self.address)
    if (existing and (existing is not self)):
        if (existing.address.buildfile != self.address.buildfile):
            raise TargetDefinitionException(self, ('already defined in a sibling BUILD file: %s' % existing.address.buildfile.relpath))
        else:
            raise TargetDefinitionException(self, ('duplicate to %s' % existing))
    self._targets_by_address[self.address] = self
    self._addresses_by_buildfile[self.address.buildfile].add(self.address)
