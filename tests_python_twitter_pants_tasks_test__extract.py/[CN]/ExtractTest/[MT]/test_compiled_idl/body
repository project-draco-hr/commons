def test_compiled_idl(self):
    buildfile = 'test_compiled_idl/a'
    with pytest.raises(TaskError):
        with ParseContext.temp():
            Extract.compiled_idl(idl_deps='wrong type')
    self.create_target(buildfile, dedent("\n      thrift_library(name='mybird', sources=None)\n      "))
    self.create_target(buildfile, dedent("\n      thrift_library(name='urbird', sources=None)\n      "))
    idl_deps = [self.target(('%s:mybird' % buildfile)), self.target(('%s:urbird' % buildfile))]
    self.assertTrue(isinstance(Extract.compiled_idl(idl_deps=idl_deps), AnonymousDeps))
    lib = Extract.compiled_idl(idl_deps=idl_deps, name='margot')
    self.assertTrue(isinstance(lib, JarLibrary))
