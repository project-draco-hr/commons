def write_tree(self):
    "Writes this index to a corresponding Tree object into the repository's\n\t\tobject database and return it.\n\t\t\n\t\t:return: Tree object representing this index\n\t\t:note: The tree will be written even if one or more objects the tree refers to \n\t\t\tdoes not yet exist in the object database. This could happen if you added\n\t\t\tEntries to the index directly.\n\t\t:raise ValueError: if there are no entries in the cache\n\t\t:raise UnmergedEntriesError: "
    mdb = MemoryDB()
    entries = self._entries_sorted()
    (binsha, tree_items) = write_tree_from_cache(entries, mdb, slice(0, len(entries)))
    mdb.stream_copy(mdb.sha_iter(), self.repo.odb)
    root_tree = Tree(self.repo, binsha, path='')
    root_tree._cache = tree_items
    return root_tree
