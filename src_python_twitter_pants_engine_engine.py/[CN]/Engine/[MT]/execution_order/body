@staticmethod
def execution_order(phases):
    'Yields all phases needed to attempt the given phases in proper phase execution order.'
    processed = set()

    def order(_phases):
        for phase in _phases:
            if (phase not in processed):
                processed.add(phase)
                for goal in phase.goals():
                    for dep in order(goal.dependencies):
                        yield dep
                yield phase
    for ordered in order(phases):
        yield ordered
