def _get_nailgun_client(self, jvm_args, classpath, stdout, stderr):
    classpath = (self._nailgun_classpath + classpath)
    new_fingerprint = self._fingerprint(jvm_args, classpath)
    endpoint = self._get_nailgun_endpoint()
    running = (endpoint and self._check_pid(endpoint.pid))
    updated = (endpoint and (endpoint.fingerprint != new_fingerprint))
    if (running and (not updated)):
        return self._create_ngclient(endpoint.port, stdout, stderr)
    else:
        if (running and updated):
            log.debug(('Killing ng server with fingerprint %s @ pid:%d port:%d' % endpoint))
            self.kill()
        return self._spawn_nailgun_server(new_fingerprint, jvm_args, classpath, stdout, stderr)
