def runjava_indivisible(jvmargs=None, classpath=None, main=None, opts=None, args=None, dryrun=False, **kwargs):
    "Spawns a java process with the supplied configuration and returns its exit code.\n  The args list is indivisable so it can't be split across multiple invocations of the command\n  similiar to xargs.\n  Passes kwargs through to subproccess.call.\n  "
    cmd_with_args = _runjava_cmd(jvmargs=jvmargs, classpath=classpath, main=main, opts=opts, args=args)
    if dryrun:
        return ' '.join(cmd_with_args)
    else:
        with safe_classpath():
            return _subprocess_call(cmd_with_args, **kwargs)
