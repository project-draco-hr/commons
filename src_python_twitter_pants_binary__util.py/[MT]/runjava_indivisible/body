def runjava_indivisible(jvm_options=None, classpath=None, main=None, opts=None, args=None, dryrun=False, workunit_factory=None, workunit_name=None, **kwargs):
    "Spawns a java process with the supplied configuration and returns its exit code.\n  The args list is indivisible so it can't be split across multiple invocations of the command\n  similiar to xargs.\n  Passes kwargs through to subproccess.call.\n  "
    cmd_with_args = _runjava_cmd(jvm_options=jvm_options, classpath=classpath, main=main, opts=opts, args=args)
    if dryrun:
        return _runjava_cmd_to_str(cmd_with_args)
    else:
        with safe_classpath():
            return _subprocess_call(cmd_with_args, workunit_factory=workunit_factory, workunit_name=(workunit_name or main), **kwargs)
