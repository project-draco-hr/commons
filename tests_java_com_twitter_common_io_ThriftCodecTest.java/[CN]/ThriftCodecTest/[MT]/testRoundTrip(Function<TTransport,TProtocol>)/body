{
  Codec<Struct> codec=new ThriftCodec<Struct>(Struct.class,protocolFactory);
  ByteArrayOutputStream sink=new ByteArrayOutputStream();
  codec.serialize(new Struct("jake","jones"),sink);
  Struct struct=codec.deserialize(new ByteArrayInputStream(sink.toByteArray()));
  assertEquals("jake",struct.getName());
  assertEquals("jones",struct.getValue());
}
