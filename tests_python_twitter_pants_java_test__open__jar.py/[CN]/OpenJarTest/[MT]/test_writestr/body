def test_writestr(self):

    def assert_writestr(path, contents, *entries):
        with self.jarfile() as jarfile:
            with open_jar(jarfile, 'w') as jar:
                jar.writestr(path, contents)
            with open_jar(jarfile) as jar:
                self.assertEquals(list(entries), jar.namelist())
                self.assertEquals(contents, jar.read(path))
    assert_writestr('a.txt', 'b', 'a.txt')
    assert_writestr('a/b/c.txt', 'd', 'a/', 'a/b/', 'a/b/c.txt')
