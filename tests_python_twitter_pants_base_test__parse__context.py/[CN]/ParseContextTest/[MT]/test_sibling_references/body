def test_sibling_references(self):
    with temporary_dir() as root_dir:
        buildfile = create_buildfile(root_dir, 'a', name='BUILD', content=dedent("\n          dependencies(name='util',\n            dependencies=[\n              jar(org='com.twitter', name='util', rev='0.0.1')\n            ]\n          )\n        ").strip())
        sibling = create_buildfile(root_dir, 'a', name='BUILD.sibling', content=dedent("\n          dependencies(name='util-ex',\n            dependencies=[\n              pants(':util'),\n              jar(org='com.twitter', name='util-ex', rev='0.0.1')\n            ]\n          )\n        ").strip())
        ParseContext(buildfile).parse()
        utilex = Target.get(Address.parse(root_dir, 'a:util-ex', is_relative=False))
        utilex_deps = set(utilex.resolve())
        util = Target.get(Address.parse(root_dir, 'a:util', is_relative=False))
        util_deps = set(util.resolve())
        self.assertEquals(util_deps, util_deps.intersection(utilex_deps))
