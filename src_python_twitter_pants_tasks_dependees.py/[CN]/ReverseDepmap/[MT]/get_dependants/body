def get_dependants(self, dependees_by_target, roots):
    check = set(roots)
    known_dependants = set()
    while True:
        dependants = set(known_dependants)
        for target in check:
            dependants.update(dependees_by_target[target])
        check = (dependants - known_dependants)
        if ((not check) or (not self._transitive)):
            return (dependants - set(roots))
        known_dependants = dependants
