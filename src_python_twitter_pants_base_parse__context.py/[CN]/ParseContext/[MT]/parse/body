def parse(self):
    'The entrypoint to parsing of a BUILD file.  Changes the working directory to the BUILD file\n    directory and then evaluates the BUILD file with the ROOT_DIR and __file__ globals set.  As\n    target methods are parsed they can examine the stack to find these globals and thus locate\n    themselves for the purposes of finding files (see locate() and bind()).'
    pants_context = {}
    ast = compile('from twitter.pants import *', '<string>', 'exec')
    exec ast in pants_context

    def _parse():
        start = os.path.abspath(os.curdir)
        try:
            os.chdir(self.buildfile.parent_path)
            for buildfile in self.buildfile.family():
                self.buildfile = buildfile
                eval_globals = copy.copy(pants_context)
                eval_globals.update({'ROOT_DIR': buildfile.root_dir, '__file__': buildfile.full_path, })
                execfile(buildfile.full_path, eval_globals, {})
        finally:
            os.chdir(start)
    self.do_in_context(_parse)
