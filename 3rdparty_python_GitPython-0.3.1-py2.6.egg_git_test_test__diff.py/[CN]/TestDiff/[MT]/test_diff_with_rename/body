def test_diff_with_rename(self):
    output = StringProcessAdapter(fixture('diff_rename'))
    diffs = Diff._index_from_patch_format(self.rorepo, output.stdout)
    self._assert_diff_format(diffs)
    assert_equal(1, len(diffs))
    diff = diffs[0]
    assert_true(diff.renamed)
    assert_equal(diff.rename_from, 'AUTHORS')
    assert_equal(diff.rename_to, 'CONTRIBUTORS')
