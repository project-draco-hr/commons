{
  Exception exception=new Exception(failure);
  Description description=failure.getDescription();
  TestSuite suite=suites.get(description.getTestClass());
  TestCase testCase=cases.get(description);
  if (Util.isAssertionFailure(failure)) {
    testCase.setFailure(exception);
    suite.incrementFailures();
  }
 else {
    testCase.setError(exception);
    suite.incrementErrors();
  }
}
