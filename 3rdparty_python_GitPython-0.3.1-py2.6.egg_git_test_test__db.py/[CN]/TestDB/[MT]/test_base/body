def test_base(self):
    gdb = GitCmdObjectDB(os.path.join(self.rorepo.git_dir, 'objects'), self.rorepo.git)
    hexsha = bin_to_hex(gdb.partial_to_complete_sha_hex('0.1.6'))
    assert (len(hexsha) == 40)
    assert (bin_to_hex(gdb.partial_to_complete_sha_hex(hexsha[:20])) == hexsha)
    for invalid_rev in ('0000', 'bad/ref', 'super bad'):
        self.failUnlessRaises(BadObject, gdb.partial_to_complete_sha_hex, invalid_rev)
