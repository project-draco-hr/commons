{
  Preconditions.checkNotNull(window);
  Preconditions.checkArgument(window.as(Time.MILLISECONDS) > (slices + 1));
  Preconditions.checkArgument(0 < slices);
  Preconditions.checkNotNull(sliceProvider);
  Preconditions.checkNotNull(merger);
  Preconditions.checkNotNull(clock);
  this.sliceDuration=window.as(Time.MILLISECONDS) / slices;
  @SuppressWarnings("unchecked") H[] bufs=(H[])Array.newInstance(clazz,slices + 1);
  for (int i=0; i < bufs.length; i++) {
    bufs[i]=sliceProvider.get();
  }
  this.buffers=bufs;
  this.merger=merger;
  this.clock=clock;
}
