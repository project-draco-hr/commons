@staticmethod
def attempt(context, phases):
    'Attempts to reach the goals for the supplied phases.'
    executed = OrderedDict()
    try:
        tasks_by_goal = {}
        expanded = OrderedSet()
        prepared = set()
        round = 0
        while True:
            goals = list(Phase.execution_order(phases))
            if (set(goals) == prepared):
                break
            else:
                round += 1
                context.log.debug(('Preparing goals in round %d' % round))
                for goal in reversed(goals):
                    if (goal not in prepared):
                        phase = Phase.of(goal)
                        expanded.add(phase)
                        context.log.debug(('preparing: %s:%s' % (phase, goal.name)))
                        prepared.add(goal)
                        task = goal.prepare(context)
                        tasks_by_goal[goal] = task
        execution_phases = ' -> '.join(map(str, reversed(expanded)))
        context.log.debug(('Executing goals in phases %s' % execution_phases))
        if getattr(context.options, 'explain', None):
            print(('Phase Execution Order:\n\n%s\n' % execution_phases))
            print('Phase [Goal->Task] Order:\n')
        for phase in phases:
            Group.execute(phase, tasks_by_goal, context, executed)
        ret = 0
    except (TargetDefinitionException, TaskError, GoalError) as e:
        message = ('%s' % e)
        if message:
            print(('\nFAILURE: %s\n' % e))
        else:
            print('\nFAILURE\n')
        ret = 1
    return ret
