def test_blocking_lock_file(self):
    my_file = tempfile.mktemp()
    lock_file = BlockingLockFile(my_file)
    lock_file._obtain_lock()
    start = time.time()
    wait_time = 0.1
    wait_lock = BlockingLockFile(my_file, 0.05, wait_time)
    self.failUnlessRaises(IOError, wait_lock._obtain_lock)
    elapsed = (time.time() - start)
    assert (elapsed <= (wait_time + 0.02))
