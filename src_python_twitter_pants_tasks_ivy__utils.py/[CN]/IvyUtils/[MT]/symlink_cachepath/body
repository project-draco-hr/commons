@staticmethod
def symlink_cachepath(inpath, symlink_dir, outpath):
    'Symlinks all paths listed in inpath into symlink_dir.\n\n    Writes the resulting paths to outpath.\n    Returns a map of path -> symlink to that path.\n    '
    safe_mkdir(symlink_dir)
    with safe_open(inpath, 'r') as infile:
        paths = filter(None, infile.read().strip().split(os.pathsep))
    symlinks = []
    for path in paths:
        symlink = os.path.join(symlink_dir, os.path.basename(path))
        safe_delete(symlink)
        os.symlink(path, symlink)
        symlinks.append(symlink)
    with safe_open(outpath, 'w') as outfile:
        outfile.write(':'.join(symlinks))
    symlink_map = dict(zip(paths, symlinks))
    return symlink_map
