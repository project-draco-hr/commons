def test_serialization_unicode_support(self):
    assert (Commit.default_encoding.lower() == 'utf-8')
    cmt = self.rorepo.commit('0.1.6')
    assert isinstance(cmt.message, unicode)
    assert isinstance(cmt.author.name, unicode)
    cmt.message = '\xc3\xbc\xc3\xa4\xc3\xaa\xc3\xa8\xc3\x9f'.decode('utf-8')
    assert (len(cmt.message) == 5)
    cmt.author.name = '\xc3\xa4\xc3\xbc\xc3\x9f'.decode('utf-8')
    assert (len(cmt.author.name) == 3)
    cstream = StringIO()
    cmt._serialize(cstream)
    cstream.seek(0)
    assert len(cstream.getvalue())
    ncmt = Commit(self.rorepo, cmt.binsha)
    ncmt._deserialize(cstream)
    assert (cmt.author.name == ncmt.author.name)
    assert (cmt.message == ncmt.message)
    cmt.author.__repr__()
