{
  expect(serviceProvider.get()).andReturn(ImmutableSet.of(runner1,runner2));
  expect(runner1.launch()).andReturn(auxiliary(A,2));
  expect(runner2.launch()).andReturn(auxiliary(ImmutableSet.of(B,C),6));
  shutdownRegistry.addAction(Commands.NOOP);
  expectLastCall().times(2);
  control.replay();
  checkPorts(Optional.<Integer>absent(),ImmutableMap.of(A,2,B,6,C,6));
}
