def merge_artifact(self, versioned_target_set):
    if (len(versioned_target_set.targets) <= 1):
        return
    with temporary_dir() as tmpdir:
        (dst_output_dir, dst_depfile, dst_analysis_cache) = self.create_output_paths(versioned_target_set.targets)
        safe_rmtree(dst_output_dir)
        safe_mkdir(dst_output_dir)
        src_analysis_caches = []
        dst_deps = Dependencies(dst_output_dir)
        for target in versioned_target_set.targets:
            (src_output_dir, src_depfile, src_analysis_cache) = self.create_output_paths([target])
            if os.path.exists(src_depfile):
                src_deps = Dependencies(src_output_dir)
                src_deps.load(src_depfile)
                dst_deps.merge(src_deps)
                classes_by_source = src_deps.findclasses([target]).get(target, {})
                for (source, classes) in classes_by_source.items():
                    for cls in classes:
                        src = os.path.join(src_output_dir, cls)
                        dst = os.path.join(dst_output_dir, cls)
                        if (os.path.exists(src) and (not os.path.exists(dst))):
                            safe_mkdir(os.path.dirname(dst))
                            os.link(src, dst)
                if os.path.exists(src_analysis_cache):
                    src_analysis_cache_tmp = os.path.join(tmpdir, os.path.relpath(src_analysis_cache, self._analysis_cache_dir))
                    shutil.copyfile(src_analysis_cache, src_analysis_cache_tmp)
                    src_analysis_caches.append(src_analysis_cache_tmp)
                    if self._zinc_utils.run_zinc_rebase(cache=src_analysis_cache_tmp, rebasings=[(src_output_dir, dst_output_dir)]):
                        self.context.log.warn(('In merge_artifact: zinc failed to rebase analysis file %s. Target may require a full rebuild.' % src_analysis_cache_tmp))
        dst_deps.save(dst_depfile)
        if self._zinc_utils.run_zinc_merge(src_caches=src_analysis_caches, dst_cache=dst_analysis_cache):
            self.context.log.warn(('zinc failed to merge analysis files %s to %s. Target may require a full rebuild.' % (':'.join(src_analysis_caches), dst_analysis_cache)))
