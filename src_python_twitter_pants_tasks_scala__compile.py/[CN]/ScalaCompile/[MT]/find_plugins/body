@staticmethod
def find_plugins(plugin_names, plugin_jars):
    'Returns a map from plugin name to plugin jar.'
    plugin_names = set(plugin_names)
    plugins = {}
    for jar in plugin_jars:
        with open_jar(jar, 'r') as jarfile:
            try:
                plugin_info_file = jarfile.open(_PLUGIN_INFO_FILE, 'r')
                plugin_info = ElementTree.parse(plugin_info_file).getroot()
                plugin_info_file.close()
                if (plugin_info.tag != 'plugin'):
                    raise TaskError, ('File %s in %s is not a valid scalac plugin descriptor' % (_PLUGIN_INFO_FILE, jar))
                name = plugin_info.find('name').text
                if (name in plugin_names):
                    if (name in plugins):
                        raise TaskError, ('Plugin %s defined in %s and in %s' % (name, plugins[name], jar))
                    plugins[name] = jar
            except KeyError:
                pass
    unresolved_plugins = (plugin_names - set(plugins.keys()))
    if (len(unresolved_plugins) > 0):
        raise TaskError, ('Could not find requested plugins: %s' % list(unresolved_plugins))
    return plugins
