{
  long sliceDuration=duration.as(Time.NANOSECONDS) / slices;
  WindowedApproxHistogram wh=new WindowedApproxHistogram(duration,slices,DEFAULT_MAX_MEMORY,ticker);
  ticker.advance(Amount.of(1L,Time.NANOSECONDS));
  for (int i=1; i <= slices; i++) {
    for (int j=0; j < 1000; j++) {
      wh.add(i);
    }
    ticker.advance(Amount.of(sliceDuration,Time.NANOSECONDS));
  }
  return wh;
}
