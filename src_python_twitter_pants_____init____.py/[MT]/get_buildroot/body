def get_buildroot():
    'Returns the pants ROOT_DIR, calculating it if needed.'
    global _BUILDROOT
    if (not _BUILDROOT):
        if ('PANTS_BUILD_ROOT' in os.environ):
            set_buildroot(os.environ['PANTS_BUILD_ROOT'])
        else:
            buildroot = os.path.abspath(os.getcwd())
            while (not os.path.exists(os.path.join(buildroot, 'pants.ini'))):
                if (buildroot != os.path.dirname(buildroot)):
                    buildroot = os.path.dirname(buildroot)
                else:
                    print('Could not find pants.ini!', file=sys.stderr)
                    sys.exit(1)
            set_buildroot(buildroot)
    return _BUILDROOT
