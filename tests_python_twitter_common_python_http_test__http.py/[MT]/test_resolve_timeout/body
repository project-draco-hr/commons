def test_resolve_timeout():
    event = threading.Event()


    class FakeWeb(Web):
        NS_TIMEOUT = 0.001

        def _resolves(self, fullurl):
            event.wait()

        def _reachable(self, fullurl):
            return True
    with pytest.raises(urllib_error.URLError):
        FakeWeb().open('http://www.google.com')
    event.set()
