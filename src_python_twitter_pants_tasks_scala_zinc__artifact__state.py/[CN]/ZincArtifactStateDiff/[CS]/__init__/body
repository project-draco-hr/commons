def __init__(self, old_state, new_state):
    if (old_state.artifact != new_state.artifact):
        raise TaskError('Cannot diff state of two different artifacts.')
    self.artifact = old_state.artifact
    self.new_or_changed_classes = set(filter((lambda f: (os.path.getmtime(os.path.join(self.artifact.classes_dir, f)) > old_state.timestamp)), new_state.classes))
    self.deleted_classes = (old_state.classes - new_state.classes)
    self.analysis_changed = (old_state.analysis_fprint != new_state.analysis_fprint)
