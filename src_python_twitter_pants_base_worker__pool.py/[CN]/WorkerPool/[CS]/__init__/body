def __init__(self, parent_workunit, run_tracker, num_workers):
    self._run_tracker = run_tracker
    self._pool = ThreadPool(processes=num_workers, initializer=self._run_tracker.register_thread, initargs=(parent_workunit,))
    self._pending_workchains = 0
    self._pending_workchains_cond = threading.Condition()
    self._shutdown_hooks = []
