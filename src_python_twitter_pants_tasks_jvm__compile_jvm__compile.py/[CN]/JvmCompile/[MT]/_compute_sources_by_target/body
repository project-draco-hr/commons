def _compute_sources_by_target(self, targets):

    def calculate_sources(target):
        sources = [s for s in target.sources_relative_to_buildroot() if s.endswith(self._file_suffix)]
        if (hasattr(target, 'java_sources') and target.java_sources):
            sources.extend(resolve_target_sources(target.java_sources, '.java'))
        return sources
    return dict([(t, calculate_sources(t)) for t in targets])
