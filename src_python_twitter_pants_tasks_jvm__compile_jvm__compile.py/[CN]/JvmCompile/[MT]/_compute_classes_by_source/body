def _compute_classes_by_source(self, analysis_file=None):
    'Compute src->classes.'
    if (analysis_file is None):
        analysis_file = self._analysis_file
    if (not os.path.exists(analysis_file)):
        return {}
    buildroot = get_buildroot()
    products = self._analysis_parser.parse_products_from_path(analysis_file)
    classes_by_src = {}
    for (src, classes) in products.items():
        relsrc = os.path.relpath(src, buildroot)
        classes_by_src[relsrc] = [os.path.relpath(cls, self._classes_dir) for cls in classes]
    return classes_by_src
