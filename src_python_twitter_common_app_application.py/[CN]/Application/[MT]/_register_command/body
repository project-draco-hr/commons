def _register_command(self, function, command_name=None):
    '\n      Registers function as the handler for command_name. Uses function.__name__ if command_name\n      is None.\n    '
    self._raise_if_initialized()
    if (Inspection.find_calling_module() == '__main__'):
        if (command_name is None):
            command_name = function.__name__
        if (command_name in self._commands):
            raise self.Error(('Found two definitions for command %s' % command_name))
        self._commands[command_name] = function
    return function
