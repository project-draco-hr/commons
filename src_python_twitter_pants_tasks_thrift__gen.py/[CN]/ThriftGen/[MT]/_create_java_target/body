def _create_java_target(self, target, dependees):
    gen_java_dir = os.path.join(self.output_dir, 'gen-java')
    genfiles = []
    for source in target.sources:
        genfiles.extend(calculate_genfiles(os.path.join(target.target_base, source)).get('java', []))
    tgt = self.context.add_new_target(gen_java_dir, JavaLibrary, name=target.id, provides=target.provides, sources=genfiles, dependencies=self.gen_java.deps, derived_from=target)
    tgt.id = (target.id + '.thrift_gen')
    tgt.add_label('codegen')
    for dependee in dependees:
        dependee.update_dependencies([tgt])
    return tgt
