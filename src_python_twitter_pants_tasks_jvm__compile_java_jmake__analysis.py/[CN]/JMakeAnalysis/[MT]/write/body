def write(self, outfile, rebasings=None):

    def rebase_path(path):
        if rebasings:
            for (rebase_from, rebase_to) in rebasings:
                if (rebase_to is None):
                    if path.startswith(rebase_from):
                        return None
                else:
                    path = path.replace(rebase_from, rebase_to)
        return path
    outfile.write('pcd entries:\n')
    outfile.write(('%d items\n' % len(self.pcd_entries)))
    for pcd_entry in self.pcd_entries:
        rebased_src = rebase_path(pcd_entry[1])
        if rebased_src:
            outfile.write(pcd_entry[0])
            outfile.write('\t')
            outfile.write(rebased_src)
            for x in pcd_entry[2:]:
                outfile.write('\t')
                outfile.write(x)
    outfile.write('dependencies:\n')
    outfile.write(('%d items\n' % len(self.src_to_deps)))
    for (src, deps) in self.src_to_deps.items():
        rebased_src = rebase_path(src)
        if rebased_src:
            outfile.write(rebased_src)
            for dep in deps:
                outfile.write('\t')
                outfile.write(dep)
            outfile.write('\n')
