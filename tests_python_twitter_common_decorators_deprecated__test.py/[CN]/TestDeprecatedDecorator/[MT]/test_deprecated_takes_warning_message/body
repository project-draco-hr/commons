def test_deprecated_takes_warning_message(self):
    warning_message = 'Use oreos() instead!'

    @deprecated_with_warning(warning_message)
    def chips_ahoy():
        pass
    chips_ahoy()
    records = self._log_handler.records()
    assert (len(records) == 1)
    assert records[0].startswith('DEPRECATION WARNING:')
    assert records[0].endswith(warning_message)
