{
  startupRegistry.addAction(new Command(){
    @Override public void execute(){
      if (!httpServerDispatch.listen(HTTP_PORT.get())) {
        LOG.severe("Failed to start HTTP server, all servlets disabled.");
        return;
      }
      for (      HttpServletConfig config : httpServlets) {
        HttpServlet handler=injector.getInstance(config.handlerClass);
        httpServerDispatch.registerHandler(config.path,handler,config.params,config.silent);
      }
      for (      HttpAssetConfig config : httpAssets) {
        httpServerDispatch.registerHandler(config.path,config.handler,null,config.silent);
      }
    }
  }
);
  shutdownRegistry.addAction(new Command(){
    @Override public void execute(){
      LOG.info("Shutting down embedded http server");
      httpServerDispatch.stop();
    }
  }
);
}
