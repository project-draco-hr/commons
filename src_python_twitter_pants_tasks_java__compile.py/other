import os
import shlex
from collections import defaultdict
import itertools
from twitter.common.dirutil import safe_open, safe_mkdir, safe_rmtree
from twitter.pants import Task
from twitter.pants.base.target import Target
from twitter.pants.base.workunit import WorkUnit
from twitter.pants.reporting.reporting_utils import items_to_report_element
from twitter.pants.tasks import TaskError
from twitter.pants.tasks.jvm_compile import JvmCompile
from twitter.pants.tasks.jvm_compiler_dependencies import Dependencies
_PROCESSOR_INFO_FILE = 'META-INF/services/javax.annotation.processing.Processor'
_JMAKE_MAIN = 'com.sun.tools.jmake.Main'
_JMAKE_ERROR_CODES = {(-1): 'invalid command line option detected', (-2): 'error reading command file', (-3): 'project database corrupted', (-4): 'error initializing or calling the compiler', (-5): 'compilation error', (-6): 'error parsing a class file', (-7): 'file not found', (-8): 'I/O exception', (-9): 'internal jmake exception', (-10): 'deduced and actual class name mismatch', (-11): 'invalid source file extension', (-12): 'a class in a JAR is found dependent on a class with the .java source', (-13): 'more than one entry for the same class is found in the project', (-20): 'internal Java error (caused by java.lang.InternalError)', (-30): 'internal Java error (caused by java.lang.RuntimeException).', }
_JMAKE_ERROR_CODES.update((((256 + code), msg) for (code, msg) in _JMAKE_ERROR_CODES.items()))
