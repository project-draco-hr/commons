def compile(self, classpath, sources, fingerprint, depfile):
    jmake_classpath = self._bootstrap_utils.get_jvm_build_tools_classpath(self._jmake_bootstrap_key, self.runjava_indivisible)
    opts = ['-classpath', ':'.join(classpath), '-d', self._classes_dir, '-pdb', os.path.join(self._classes_dir, ('%s.dependencies.pdb' % fingerprint))]
    compiler_classpath = self._bootstrap_utils.get_jvm_build_tools_classpath(self._compiler_bootstrap_key, self.runjava_indivisible)
    opts.extend(['-jcpath', ':'.join(compiler_classpath), '-jcmainclass', 'com.twitter.common.tools.Compiler', '-C-Tdependencyfile', ('-C%s' % depfile)])
    opts.extend(map((lambda arg: ('-C%s' % arg)), self._javac_opts))
    opts.extend(self._opts)
    return self.runjava_indivisible(_JMAKE_MAIN, classpath=jmake_classpath, opts=opts, args=sources, jvmargs=self._jvm_args, workunit_name='jmake', workunit_labels=[WorkUnit.COMPILER])
