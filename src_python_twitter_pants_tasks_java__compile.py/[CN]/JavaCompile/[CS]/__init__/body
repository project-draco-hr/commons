def __init__(self, context):
    NailgunTask.__init__(self, context, workdir=context.config.get('java-compile', 'nailgun_dir'))
    if (context.options.java_compile_partition_size_hint != (-1)):
        self._partition_size_hint = context.options.java_compile_partition_size_hint
    else:
        self._partition_size_hint = context.config.getint('java-compile', 'partition_size_hint', default=1000)
    workdir = context.config.get('java-compile', 'workdir')
    self._classes_dir = os.path.join(workdir, 'classes')
    self._resources_dir = os.path.join(workdir, 'resources')
    self._depfile_dir = os.path.join(workdir, 'depfiles')
    self._depfile = os.path.join(self._depfile_dir, 'global_depfile')
    safe_mkdir(self._classes_dir)
    safe_mkdir(self._depfile_dir)
    self._jmake_profile = context.config.get('java-compile', 'jmake-profile')
    self._compiler_profile = context.config.get('java-compile', 'compiler-profile')
    self._opts = context.config.getlist('java-compile', 'args')
    self._jvm_args = context.config.getlist('java-compile', 'jvm_args')
    self._javac_opts = []
    if context.options.java_compile_args:
        for arg in context.options.java_compile_args:
            self._javac_opts.extend(shlex.split(arg))
    else:
        self._javac_opts.extend(context.config.getlist('java-compile', 'javac_args', default=[]))
    if context.options.java_compile_warnings:
        self._opts.extend(context.config.getlist('java-compile', 'warning_args'))
    else:
        self._opts.extend(context.config.getlist('java-compile', 'no_warning_args'))
    self._confs = context.config.getlist('java-compile', 'confs')
    self.context.products.require_data('exclusives_groups')
    artifact_cache_spec = context.config.getlist('java-compile', 'artifact_caches2', default=[])
    self.setup_artifact_cache(artifact_cache_spec)
    self._depfile_tmpdir = os.path.join(self._depfile_dir, 'depfile_tmpdir')
