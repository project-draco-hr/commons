def checkstyle(self, sources):
    classpath = nailgun_profile_classpath(self, self._profile)
    with self.context.state('classpath', []) as cp:
        classpath.extend((jar for (conf, jar) in cp if (conf in self._confs)))
    args = ['-c', self._configuration_file, '-f', 'plain']
    if self._properties:
        properties_file = os.path.join(self._work_dir, 'checkstyle.properties')
        with safe_open(properties_file, 'w') as pf:
            for (k, v) in self._properties.items():
                pf.write(('%s=%s\n' % (k, v)))
        args.extend(['-p', properties_file])
    args.extend(sources)
    log.debug(('Executing: %s %s' % (CHECKSTYLE_MAIN, ' '.join(args))))
    return self.runjava(CHECKSTYLE_MAIN, classpath=classpath, args=args)
