def __init__(self, basedir, *allowed_target_types, **kwargs):
    'Initializes a source root at basedir for the given target types.\n\n    :basedir The base directory to resolve sources relative to\n    :allowed_target_types Optional list of target types. If specified, we enforce that\n                          only targets of those types appear under this source root.\n    '
    buildroot = get_buildroot()
    reldir = kwargs.pop('reldir', buildroot)
    basepath = os.path.abspath(os.path.join(reldir, basedir))
    if (buildroot != os.path.commonprefix((basepath, buildroot))):
        raise ValueError(('The supplied basedir %s is not a sub-path of the project root %s' % (basepath, buildroot)))
    self._basedir = os.path.relpath(basepath, buildroot)
    self._allowed_target_types = (allowed_target_types or None)
    SourceRoot._register(self)
