@contextmanager
def temporary_file(root_dir=None, cleanup=True):
    '\n    A with-context that creates a temporary file and returns a writeable file descriptor to it.\n\n    You may specify the following keyword args:\n      root_dir [path]: The parent directory to create the temporary file.\n      cleanup [True/False]: Whether or not to clean up the temporary file.\n  '
    with tempfile.NamedTemporaryFile(dir=root_dir, delete=False) as fd:
        try:
            yield fd
        finally:
            if cleanup:
                safe_delete(fd.name)
