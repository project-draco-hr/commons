@staticmethod
def expand(args):

    def convert_val(x):
        if isinstance(x, set):
            return dict([(k, True) for k in x])
        elif isinstance(x, dict):
            return MustacheRenderer.expand(x)
        elif isinstance(x, list):
            return [convert_val(e) for e in x]
        else:
            return x
    items = [(key, convert_val(val)) for (key, val) in args.items()]
    ret = dict([((key + '?'), True) for (key, val) in items if (val and (not key.endswith('?')))])
    ret.update(dict(items))
    return ret
