def register(self):
    existing = Target._targets_by_address.get(self.address)
    if (existing and (existing.address.buildfile != self.address.buildfile)):
        raise KeyError(('%s already defined in a sibling BUILD file: %s' % (self.address, existing.address)))
    Target._targets_by_address[self.address] = self
    Target._addresses_by_buildfile[self.address.buildfile].add(self.address)
