def update_artifact_cache(self, vts_artifactfiles_pairs):
    "Write to the artifact cache, if we're configured to.\n\n    vts_artifactfiles_pairs - a list of pairs (vts, artifactfiles) where\n      - vts is single VersionedTargetSet.\n      - artifactfiles is a list of paths to artifacts for the VersionedTargetSet.\n    "
    if (self._artifact_cache and self.context.options.write_to_artifact_cache):
        with self.context.new_workunit('cache'):
            with self.context.new_workunit('update'):
                targets = set()
                for (vts, artifactfiles) in vts_artifactfiles_pairs:
                    targets.update([x.address.reference() for x in vts.targets])
                for (vts, artifactfiles) in vts_artifactfiles_pairs:
                    if self.context.options.verify_artifact_cache:
                        pass
                    self._report_targets('Caching artifacts for ', list(targets), '.')
                    self._artifact_cache.insert(vts.cache_key, artifactfiles)
