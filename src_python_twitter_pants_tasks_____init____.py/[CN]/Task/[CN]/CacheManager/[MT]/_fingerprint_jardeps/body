def _fingerprint_jardeps(self, target, sha):
    internaltargets = OrderedSet()
    alltargets = OrderedSet()

    def fingerprint_external(target):
        internaltargets.add(target)
        if hasattr(target, 'dependencies'):
            alltargets.update(target.dependencies)
    target.walk(fingerprint_external)
    for external_target in (alltargets - internaltargets):
        if isinstance(external_target, JarDependency):
            jarid = ''
            for key in Task.CacheManager._JAR_HASH_KEYS:
                jarid += str(getattr(external_target, key))
            sha.update(jarid)
        else:
            sha.update(str(external_target))
