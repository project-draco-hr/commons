def __init__(self, logger, invalid_target_tree, max_num_parallel_compiles, compile_cmd, post_compile_cmd=None):
    self._logger = logger
    self._tree = invalid_target_tree
    self._max_num_parallel_compiles = max_num_parallel_compiles
    self._compile_cmd = compile_cmd
    self._post_compile_cmd = post_compile_cmd
    self._in_flight_target_nodes = set([])
    self._frontier_nodes = set([leaf for leaf in invalid_target_tree.leaves])
    self._compile_processes = set([])
    self._compiling_nodes_by_process = {}
    self._versioned_target_sets_by_process = {}
    self._processed_nodes = []
    self._failed_compiles = []
