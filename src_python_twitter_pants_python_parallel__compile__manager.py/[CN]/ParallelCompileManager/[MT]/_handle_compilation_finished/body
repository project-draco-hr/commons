def _handle_compilation_finished(self, compile_process, return_value):
    'Clean up a finished compilation process.'
    if (return_value == 0):
        self._logger.info(('Finished compiling: {%s}' % ','.join((node.data.id for node in self._compiling_nodes_by_process[compile_process]))))
    else:
        self._logger.warn(('*** Failed compiling (%d): {%s}\n' % (return_value, ','.join((node.data.id for node in self._compiling_nodes_by_process[compile_process])))))
    self._compile_processes.remove(compile_process)
    target_node_set = self._compiling_nodes_by_process[compile_process]
    versioned_target_set = self._versioned_target_sets_by_process[compile_process]
    del self._compiling_nodes_by_process[compile_process]
    del self._versioned_target_sets_by_process[compile_process]
    self._in_flight_target_nodes -= target_node_set
    self._handle_processed_node_set(versioned_target_set, target_node_set, was_compiled=True, was_successful=(return_value == 0))
