{
  StringBuilder message=new StringBuilder("server set change: ");
  if (serverSet.size() != newServerSet.size()) {
    message.append("from ").append(serverSet.size()).append(" members to ").append(newServerSet.size());
  }
  MapDifference<Endpoint,ServiceInstance> changes=Maps.difference(Maps.uniqueIndex(serverSet,GET_PRIMARY_ENDPOINT),Maps.uniqueIndex(newServerSet,GET_PRIMARY_ENDPOINT));
  Joiner joiner=Joiner.on("\n\t\t");
  Map<Endpoint,ServiceInstance> left=changes.entriesOnlyOnLeft();
  if (!left.isEmpty()) {
    message.append("\n\tleft:\n\t\t").append(joiner.join(left.values()));
  }
  Map<Endpoint,ServiceInstance> joined=changes.entriesOnlyOnRight();
  if (!joined.isEmpty()) {
    message.append("\n\tjoined:\n\t\t").append(joiner.join(joined.values()));
  }
  Map<Endpoint,ValueDifference<ServiceInstance>> differing=changes.entriesDiffering();
  if (!differing.isEmpty()) {
    message.append("\n\tstatus changed:\n\t\t").append(joiner.join(differing.values()));
  }
  LOG.log(level,message.toString());
}
