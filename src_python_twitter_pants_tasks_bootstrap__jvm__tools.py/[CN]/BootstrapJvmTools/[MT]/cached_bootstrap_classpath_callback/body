def cached_bootstrap_classpath_callback(self, key, tools):
    cache = {}
    cache_lock = threading.Lock()

    def bootstrap_classpath(java_runner=None):
        with cache_lock:
            if ('classpath' not in cache):
                targets = list(self.resolve_tool_targets(tools))
                workunit_name = ('bootstrap-%s' % str(key))
                cache['classpath'] = self.ivy_resolve(targets, java_runner=java_runner, silent=True, workunit_name=workunit_name, workunit_labels=[WorkUnit.BOOTSTRAP])
            return cache['classpath']
    return bootstrap_classpath
