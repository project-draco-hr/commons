import errno
import hashlib
import itertools
import os
from abc import abstractmethod
from collections import namedtuple
from twitter.common.dirutil import safe_mkdir
from twitter.common.lang import Compatibility, Interface
from twitter.pants.base.hash_utils import hash_all
from twitter.pants.fs.fs import safe_filename
from twitter.pants.base.target import Target
CacheKey = namedtuple('CacheKey', ['id', 'hash', 'num_sources', 'sources'])
NO_SOURCES = NoSources()
TARGET_SOURCES = DefaultSourceScope(recursive=False, include_buildfile=False)
TRANSITIVE_SOURCES = DefaultSourceScope(recursive=True, include_buildfile=False)
GLOBAL_CACHE_KEY_GEN_VERSION = '6'
