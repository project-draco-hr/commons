def build_libs_dir(self, target, ivyxml, conf):
    all_deps = OrderedSet()
    all_sources = ['dummy']

    def extract_jars(ttarget):
        for jar_dep in ttarget.jar_dependencies:
            if jar_dep.rev:
                all_deps.add(copy(jar_dep))
    target.walk(extract_jars)

    def create_meta_target():
        return JavaLibrary((target.name + '.deps'), all_sources, dependencies=all_deps, is_meta=True)
    meta_target = target.do_in_context(create_meta_target)
    local_ivy = (os.path.abspath(ivyxml) + '.local')
    AntBuilder.generate_ivy(self.workspace_root, local_ivy, meta_target)
    libs_dir = os.path.join(os.path.dirname(os.path.abspath(ivyxml)), 'libs', conf)
    if (not os.path.exists(libs_dir)):
        os.makedirs(libs_dir)
    classpath_result = subprocess.call(['java', '-jar', self.ivy_jar, '-settings', self.ivy_settings, '-ivy', local_ivy, '-confs', conf, '-retrieve', ('%s/[artifact]-[revision].[ext]' % libs_dir), '-symlink', '-sync'])
