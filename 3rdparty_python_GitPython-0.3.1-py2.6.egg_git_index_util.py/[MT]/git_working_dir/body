def git_working_dir(func):
    'Decorator which changes the current working dir to the one of the git \n\trepository in order to assure relative paths are handled correctly'

    def set_git_working_dir(self, *args, **kwargs):
        cur_wd = os.getcwd()
        os.chdir(self.repo.working_tree_dir)
        try:
            return func(self, *args, **kwargs)
        finally:
            os.chdir(cur_wd)
    set_git_working_dir.__name__ = func.__name__
    return set_git_working_dir
