{
  Throwable error=null;
  for (int i=0; i <= numRetries; i++) {
    try {
      createStatement(method).evaluate();
      if (i > 0) {
        Method m=method.getMethod();
        String testName=m.getName() + '(' + m.getDeclaringClass().getName()+ ')';
        err.println("Test " + testName + " is FLAKY; passed after "+ (i + 1)+ " attempts");
      }
      return;
    }
 catch (    Throwable t) {
      if (t instanceof Exception || t instanceof AssertionError) {
        if (error == null) {
          error=t;
        }
      }
 else {
        throw t;
      }
    }
  }
  throw error;
}
