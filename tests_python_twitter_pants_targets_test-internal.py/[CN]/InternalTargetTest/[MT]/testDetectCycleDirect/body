def testDetectCycleDirect(self):
    a = MockTarget('a')
    InternalTarget.sort_targets([a])
    a.internal_dependencies = [a]
    try:
        InternalTarget.sort_targets([a])
        self.fail('Expected a cycle to be detected')
    except InternalTarget.CycleException:
        pass
