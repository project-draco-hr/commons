def test(self):
    self.java_library('root', 'colorless', deps=[])
    self.java_library('root', 'a_red', deps=['root:colorless'])
    self.java_library('root', 'b_red', deps=['root:a_red'])
    self.java_library('root', 'c_red', deps=['root:a_red', 'root:colorless'])
    self.java_library('root', 'd_red', deps=['root:b_red', 'root:c_red'])
    chunks = self.iterate('root:d_red')
    self.assertEqual(1, len(chunks))
    (group_member, targets) = chunks[0]
    self.assertEqual(self.red, group_member)
    self.assertEqual(set(self.targets('root:d_red', 'root:b_red', 'root:c_red', 'root:a_red')), set(targets))
