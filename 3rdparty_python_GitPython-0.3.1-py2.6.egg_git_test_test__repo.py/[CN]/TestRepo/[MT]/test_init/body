def test_init(self):
    prev_cwd = os.getcwd()
    os.chdir(tempfile.gettempdir())
    git_dir_rela = 'repos/foo/bar.git'
    del_dir_abs = os.path.abspath('repos')
    git_dir_abs = os.path.abspath(git_dir_rela)
    try:
        for path in (git_dir_rela, git_dir_abs):
            r = Repo.init(path=path, bare=True)
            assert isinstance(r, Repo)
            assert (r.bare == True)
            assert os.path.isdir(r.git_dir)
            self._assert_empty_repo(r)
            clone_path = (path + '_clone')
            rc = r.clone(clone_path)
            self._assert_empty_repo(rc)
            try:
                shutil.rmtree(clone_path)
            except OSError:
                pass
            rc = Repo.clone_from(r.git_dir, clone_path)
            self._assert_empty_repo(rc)
            shutil.rmtree(git_dir_abs)
            try:
                shutil.rmtree(clone_path)
            except OSError:
                pass
        os.makedirs(git_dir_rela)
        os.chdir(git_dir_rela)
        r = Repo.init(bare=False)
        (r.bare == False)
        self._assert_empty_repo(r)
    finally:
        try:
            shutil.rmtree(del_dir_abs)
        except OSError:
            pass
        os.chdir(prev_cwd)
