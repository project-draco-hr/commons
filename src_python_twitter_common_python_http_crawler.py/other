import contextlib
import errno
from functools import partial
import os
import re
import threading
from ..compatibility import PY3
from .http import CachedWeb, Web
from .tracer import TRACER
if PY3:
    from queue import Empty, Queue
    import urllib.error as urllib_error
    from urllib.parse import urlparse, urljoin
else:
    from Queue import Empty, Queue
    import urllib2 as urllib_error
    from urlparse import urlparse, urljoin
