def _update_targets_by_file(self, targets):
    'Update the targets_by_file mapping as new classes are generated by a compiler run.'
    genmap = self._context.products.get('classes')
    targets_by_file = self._get_targets_by_file()
    for tgt in targets:
        products = genmap.get(tgt)
        for (basedir, classes) in products.items():
            for cls in classes:
                targets_by_file[os.path.join(basedir, cls)].add(tgt)
