def sourcejar(self, jvm_targets, add_genjar):
    for target in jvm_targets:
        jar_name = jarname(target, '-sources.jar')
        add_genjar(target, jar_name)
        jar_path = os.path.join(self._output_dir, jar_name)
        with self.create_jar(target, jar_path) as jar:
            for source in target.sources:
                jar.write(os.path.join(get_buildroot(), target.target_base, source), source)
            if target.has_resources:
                for resources in target.resources:
                    for resource in resources.sources:
                        jar.write(os.path.join(get_buildroot(), resources.target_base, resource), resource)
