def sourcejar(self, jvm_targets, add_genjar):
    for target in jvm_targets:
        jar_name = ('%s-sources.jar' % jarname(target))
        add_genjar(target, jar_name)
        jar_path = os.path.join(self._output_dir, jar_name)
        with self.create_jar(target, jar_path) as zipfile:
            for source in target.sources:
                zipfile.write(os.path.join(target.target_base, source), source)
            if target.has_resources:
                for resources in target.resources:
                    for resource in resources.sources:
                        zipfile.write(os.path.join(get_buildroot(), resources.target_base, resource), resource)
