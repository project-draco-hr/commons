{
  tokenizer.reset(text);
  CharSequenceTermAttribute termAttr=tokenizer.getAttribute(CharSequenceTermAttribute.class);
  TokenTypeAttribute typeAttr=tokenizer.getAttribute(TokenTypeAttribute.class);
  PartOfSpeechAttribute posAttr=null;
  if (tokenizer.hasAttribute(PartOfSpeechAttribute.class)) {
    posAttr=tokenizer.getAttribute(PartOfSpeechAttribute.class);
  }
  TokenizedCharSequence.Builder builder=new TokenizedCharSequence.Builder(text);
  while (tokenizer.incrementToken()) {
    builder.addToken(termAttr.getOffset(),termAttr.getLength(),typeAttr.getType(),posAttr == null ? Token.DEFAULT_PART_OF_SPEECH : posAttr.getPOS());
  }
  return builder.build();
}
