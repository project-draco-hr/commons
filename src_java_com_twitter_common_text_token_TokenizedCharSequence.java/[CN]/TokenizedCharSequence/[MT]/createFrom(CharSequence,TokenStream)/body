{
  tokenizer.reset(text);
  OffsetAttribute offsetAttr=tokenizer.getAttribute(OffsetAttribute.class);
  TokenTypeAttribute typeAttr=tokenizer.getAttribute(TokenTypeAttribute.class);
  PartOfSpeechAttribute posAttr=null;
  if (tokenizer.hasAttribute(PartOfSpeechAttribute.class)) {
    posAttr=tokenizer.getAttribute(PartOfSpeechAttribute.class);
  }
  TokenizedCharSequence.Builder builder=new TokenizedCharSequence.Builder(text);
  while (tokenizer.incrementToken()) {
    builder.addToken(offsetAttr.startOffset(),offsetAttr.endOffset() - offsetAttr.startOffset(),typeAttr.getType(),posAttr == null ? Token.DEFAULT_PART_OF_SPEECH : posAttr.getPOS());
  }
  return builder.build();
}
