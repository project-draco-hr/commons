import os
import re
import subprocess
from collections import defaultdict
from twitter.common import log
from twitter.common.collections import OrderedSet
from twitter.common.dirutil import safe_mkdir
from twitter.pants.binary_util import select_binary
from twitter.pants.targets.java_library import JavaLibrary
from twitter.pants.targets.java_protobuf_library import JavaProtobufLibrary
from twitter.pants.targets.python_library import PythonLibrary
from .code_gen import CodeGen
from . import TaskError
DEFAULT_PACKAGE_PARSER = re.compile('^\\s*package\\s+([^;]+)\\s*;\\s*$')
OPTION_PARSER = re.compile('^\\s*option\\s+([^ =]+)\\s*=\\s*([^\\s]+)\\s*;\\s*$')
TYPE_PARSER = re.compile('^\\s*(enum|message)\\s+([^\\s{]+).*')
