def __init__(self, host, port, endpoint, max_delay, stats_file, user, force_stats_upload=False):
    self.force_stats_upload = force_stats_upload
    self._stats_log_dir = dirutil.safe_mkdtemp()
    self._stats_log_file = os.path.join(self._stats_log_dir, 'current_run')
    log.init(self._stats_log_file)
    self._stats_dir = os.path.join('/tmp', user, 'stats_uploader_dir')
    self._stats_http_client = StatsHttpClient(host, port, endpoint, self._stats_dir)
    self._max_delay = max_delay
    self._pants_stat_file = stats_file
    self._user = user
