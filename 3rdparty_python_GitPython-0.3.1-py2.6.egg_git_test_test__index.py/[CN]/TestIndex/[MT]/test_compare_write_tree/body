@with_rw_repo('HEAD')
def test_compare_write_tree(self, rw_repo):
    max_count = 25
    count = 0
    for commit in rw_repo.head.commit.traverse():
        if (count >= max_count):
            break
        count += 1
        index = rw_repo.index.reset(commit)
        orig_tree = commit.tree
        assert (index.write_tree() == orig_tree)
