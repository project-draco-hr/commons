def test_keyword_replacement(self):
    m = mock_open(read_data='')
    with patch('__builtin__.open', m, create=True):
        with patch('shutil.copyfile'):
            builder = PythonThriftBuilder(target=self.target('test_thrift_replacement:one'), root_dir=self.build_root, config=create_config(sample_ini=sample_ini_test))
            builder._modify_thrift = MagicMock()
            builder._run_thrift = MagicMock()
            builder.run_thrifts()
            builder._modify_thrift.assert_called_once_with(os.path.realpath(('%s/thrift/py-thrift/%s' % (self.build_root, 'thrift/keyword.thrift'))))
