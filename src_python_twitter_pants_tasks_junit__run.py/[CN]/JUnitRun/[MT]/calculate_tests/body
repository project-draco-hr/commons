def calculate_tests(self, targets):

    def is_test_file(test):
        basename = os.path.basename(test)
        return ((test.endswith('Test.java') or test.endswith('IT.java')) and (not basename.startswith('Base')) and (not basename.startswith('Abstract')))
    tests = set()
    for target in targets:
        if (is_java(target) and is_test(target)):
            tests.update((self.normalize(test, target.target_base) for test in target.sources if is_test_file(test)))
    return tests
