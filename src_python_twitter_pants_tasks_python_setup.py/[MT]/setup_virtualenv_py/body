def setup_virtualenv_py(context):
    virtualenv_cache = context.config.get('python-setup', 'bootstrap_cache')
    virtualenv_target = context.config.get('python-setup', 'virtualenv_target')
    if (not os.path.exists(virtualenv_cache)):
        safe_mkdir(virtualenv_cache)
    if os.path.exists(os.path.join(virtualenv_target, 'virtualenv.py')):
        return True
    else:
        safe_mkdir(virtualenv_target)
    virtualenv_urls = context.config.getlist('python-setup', 'virtualenv_urls')
    tf = None
    for url in virtualenv_urls:
        try:
            ve_tgz = urlopen(url, timeout=5)
            ve_tgz_fp = StringIO(ve_tgz.read())
            ve_tgz_fp.seek(0)
            tf = tarfile.open(fileobj=ve_tgz_fp, mode='r:gz')
            break
        except Exception as e:
            context.log.warn(('Failed to pull virtualenv from %s' % url))
            continue
    if (not tf):
        raise TaskError('Could not download virtualenv!')
    try:
        tf.extractall(path=virtualenv_cache)
    except Exception as e:
        raise TaskError(('Could not install virtualenv: %s' % e))
    context.log.info(('Extracted %s' % url))
