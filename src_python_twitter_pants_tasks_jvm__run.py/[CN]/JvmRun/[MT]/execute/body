def execute(self, targets):
    self.context.lock.release()
    binaries = filter(is_binary, targets)
    if (len(binaries) > 0):
        main = binaries[0].main

        def run_binary(dryrun=False):
            result = runjava_indivisible(jvmargs=self.jvm_args, classpath=self.classpath(confs=self.confs), main=main, args=self.args, dryrun=dryrun, workunit_factory=self.context.new_workunit, workunit_name='run')
            if dryrun:
                return result
            if (result != 0):
                raise TaskError()
        result = run_binary(dryrun=self.only_write_cmd_line)
        if self.only_write_cmd_line:
            with safe_open(self.only_write_cmd_line, 'w') as fd:
                fd.write(result)
