def execute(self, targets):
    self.context.lock.release()
    binaries = filter(is_binary, targets)
    if (len(binaries) > 0):
        main = binaries[0].main

        def run_binary(only_write_cmd_line_to):
            result = runjava(jvmargs=self.jvm_args, classpath=self.classpath(confs=self.confs), main=main, args=self.args, only_write_cmd_line_to=only_write_cmd_line_to)
            if (result != 0):
                raise TaskError()
        if (self.only_write_cmd_line is None):
            run_binary(None)
        else:
            with safe_open(self.only_write_cmd_line, 'w') as fd:
                run_binary(fd)
