def test_cache_spec_parsing():
    artifact_root = '/bogus/artifact/root'

    def check(expected_type, spec):
        cache = create_artifact_cache(None, artifact_root, spec)
        assert isinstance(cache, expected_type)
        assert (cache.artifact_root == artifact_root)
    with temporary_file() as temp:
        path = temp.name
        check(FileBasedArtifactCache, path)
        check(RESTfulArtifactCache, 'http://foo/bar')
        check(CombinedArtifactCache, [path, 'http://foo/bar'])
